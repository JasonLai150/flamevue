(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();class Tn{constructor(e,n,r={},s={}){this.device=e,this.canvas=n,this.items=new Set,this.depthFormat="depth24plus-stencil8",this._pixelRatio=window.devicePixelRatio,this.presentationSize={width:0,height:0},this._sampleCount=1,this.presentationSize.width=this.canvas.clientWidth*this.pixelRatio,this.presentationSize.height=this.canvas.clientHeight*this.pixelRatio,this.canvas.width=this.presentationSize.width,this.canvas.height=this.presentationSize.height,this.ctx=this.canvas.getContext("webgpu"),this.presentationFormat=navigator.gpu.getPreferredCanvasFormat(),this._sampleCount=s.antialias?4:1,this.ctx.configure(Object.assign({device:this.device,format:this.presentationFormat,usage:GPUTextureUsage.RENDER_ATTACHMENT,alphaMode:"premultiplied"},r)),s.antialias&&(this.antialiasRenderTexture=e.createTexture({size:[n.width,n.height],format:this.presentationFormat,sampleCount:this.sampleCount,usage:GPUTextureUsage.RENDER_ATTACHMENT})),this.depthTexture=e.createTexture({size:{width:this.width,height:this.height,depthOrArrayLayers:1},format:this.depthFormat,sampleCount:this.sampleCount,usage:GPUTextureUsage.RENDER_ATTACHMENT}),this.renderPassDescriptor={colorAttachments:[{view:this.colourAttachmentView,resolveTarget:this.colourAttachmentResolveTarget,clearValue:{r:0,g:0,b:0,a:0},loadOp:"clear",storeOp:"store"}],depthStencilAttachment:{view:this.depthTexture.createView(),depthClearValue:1,depthLoadOp:"clear",depthStoreOp:"store",stencilLoadOp:"clear",stencilStoreOp:"store"}}}get width(){return this.renderTexture?this.renderTexture.width:this.presentationSize.width}get height(){return this.renderTexture?this.renderTexture.height:this.presentationSize.height}get aspectRatio(){return this.width/this.height}get pixelRatio(){return this._pixelRatio}set pixelRatio(e){this._pixelRatio=e,this.resize()}get sampleCount(){return this._sampleCount}set renderTexture(e){var n,r;const s=this.width,i=this.height;(n=this._renderTexture)===null||n===void 0||n.destroy(),this._renderTexture=e,this.setColourAttachment(),(this.width!==s||this.height!==i)&&((r=this.depthTexture)===null||r===void 0||r.destroy(),this.depthTexture=this.device.createTexture({size:{width:this.width,height:this.height,depthOrArrayLayers:1},sampleCount:this.sampleCount,format:this.depthFormat,usage:GPUTextureUsage.RENDER_ATTACHMENT}),this.renderPassDescriptor.depthStencilAttachment.view=this.depthTexture.createView())}get renderTexture(){return this._renderTexture}resize(e,n){var r;if(this.renderTexture)return;const s=(e||this.canvas.clientWidth)*this.pixelRatio,i=(n||this.canvas.clientHeight)*this.pixelRatio;s===this.width&&i===this.height||(this.presentationSize.width=s,this.presentationSize.height=i,this.canvas.width=this.presentationSize.width,this.canvas.height=this.presentationSize.height,(r=this.depthTexture)===null||r===void 0||r.destroy(),this.depthTexture=this.device.createTexture({size:{width:this.width,height:this.height,depthOrArrayLayers:1},format:this.depthFormat,sampleCount:this.sampleCount,usage:GPUTextureUsage.RENDER_ATTACHMENT}),this.renderPassDescriptor.depthStencilAttachment.view=this.depthTexture.createView(),this.antialiasRenderTexture&&(this.antialiasRenderTexture=this.device.createTexture({size:[e,n],format:this.presentationFormat,sampleCount:this.sampleCount,usage:GPUTextureUsage.RENDER_ATTACHMENT})))}add(e){this.items.add(e)}remove(e){this.items.delete(e)}get colourAttachmentView(){return this.antialiasRenderTexture?this.antialiasRenderTexture.createView():this.renderTexture?this.renderTexture.createView():this.ctx.getCurrentTexture().createView()}get colourAttachmentResolveTarget(){if(this.antialiasRenderTexture)return this.renderTexture?this.renderTexture.createView():this.ctx.getCurrentTexture().createView()}setColourAttachment(){this.renderPassDescriptor.colorAttachments[0].view=this.colourAttachmentView,this.renderPassDescriptor.colorAttachments[0].resolveTarget=this.colourAttachmentResolveTarget}render(e){this.setColourAttachment();const n=this.device.createCommandEncoder(),r=n.beginRenderPass(this.renderPassDescriptor);Array.isArray(e)?e.forEach(i=>i.getCommands(r)):e.getCommands(r),r.end();const s=n.finish();this.device.queue.submit([s])}renderAll(){this.setColourAttachment();const e=this.device.createCommandEncoder(),n=e.beginRenderPass(this.renderPassDescriptor);for(const s of this.items)s.getCommands(n);n.end();const r=e.finish();this.device.queue.submit([r])}}class En{constructor(e){this.device=e,this.items=new Set}add(e){this.items.add(e)}remove(e){this.items.delete(e)}run(e){const n=this.device.createCommandEncoder(),r=n.beginComputePass();Array.isArray(e)?e.forEach(i=>i.getCommands(r)):e.getCommands(r),r.end();const s=n.finish();this.device.queue.submit([s])}runAll(){const e=this.device.createCommandEncoder(),n=e.beginComputePass();for(const s of this.items)s.getCommands(n);n.end();const r=e.finish();this.device.queue.submit([r])}}class Fe{get inputs(){return this._inputs}set inputs(e){this._inputs=e,this.inputsKeys=Object.keys(this.inputs)}getInput(e){return this.inputs[e]}setInput(e,n){this._inputs[e]=n,this.inputsKeys=Object.keys(this.inputs)}getBindGroupLayouts(){return this.inputsKeys.map(e=>this.inputs[e].bindGroupLayout)}setBindGroups(e){this.inputsKeys.forEach((n,r)=>{this.inputs[n].update&&this.inputs[n].update(),e.setBindGroup(r,this.inputs[n].bindGroup)})}getWgslChunk(){return this.inputsKeys.reduce((e,n)=>`${e} ${this.inputs[n].getWgslChunk(this.inputsKeys.indexOf(n),n)}`,"")}}class xn extends Fe{constructor(e,n,r,s,i={}){super(),this.renderer=e,this.shader=n,this.geometry=r,this._inputs=s,i=Object.assign({wireframe:!1,depthWrite:!0,depthCompare:"less"},i),this.inputsKeys=Object.keys(this.inputs);const o=e.device.createShaderModule({code:this.shader}),c=this.geometry.getVertexState(o),h=this.getFragmentState(o),u=e.device.createPipelineLayout({bindGroupLayouts:this.getBindGroupLayouts()});this.pipeline=e.device.createRenderPipeline({layout:u,vertex:c,fragment:h,primitive:{topology:i.wireframe?"line-list":"triangle-list"},depthStencil:{format:e.depthFormat,depthWriteEnabled:i.depthWrite,depthCompare:i.depthCompare},multisample:e.sampleCount===4?{count:e.sampleCount,alphaToCoverageEnabled:!0}:void 0})}get inputs(){return this._inputs}getFragmentState(e){return{module:e,entryPoint:"fragment_main",targets:[{format:this.renderer.presentationFormat,blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha",operation:"add"},alpha:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha",operation:"add"}}}]}}setBindGroups(e){super.setBindGroups(e)}getCommands(e){e.setPipeline(this.pipeline),this.geometry.setVertexBuffers(e),this.setBindGroups(e),e.drawIndexed(this.geometry.vertexCount,this.geometry.instanceCount,0,0)}}class Bn extends Fe{constructor(e,n,r,s,i){super(),this.device=e,this.shader=n,this._inputs=r,this.count=s,this.workgroupSize=i,this.inputsKeys=Object.keys(this.inputs);const o=this.device.createShaderModule({code:this.shader}),c=this.device.createPipelineLayout({bindGroupLayouts:this.getBindGroupLayouts()});this.pipeline=this.device.createComputePipeline({layout:c,compute:{module:o,entryPoint:"main"}})}setBindGroups(e){super.setBindGroups(e)}getCommands(e){e.setPipeline(this.pipeline),this.setBindGroups(e),e.dispatchWorkgroups(Math.ceil(this.count/this.workgroupSize))}}class _n{constructor(e,{indices:n,normal:r,position:s,texcoord:i},o=1){this.instanceCount=o,this._vertexCount=n==null?void 0:n.length,this.positionBuffer=e.device.createBuffer({size:s.length*Float32Array.BYTES_PER_ELEMENT,usage:GPUBufferUsage.VERTEX,mappedAtCreation:!0}),new Float32Array(this.positionBuffer.getMappedRange()).set(s),this.positionBuffer.unmap(),this.normalBuffer=e.device.createBuffer({size:r.length*Float32Array.BYTES_PER_ELEMENT,usage:GPUBufferUsage.VERTEX,mappedAtCreation:!0}),new Float32Array(this.normalBuffer.getMappedRange()).set(r),this.normalBuffer.unmap(),this.texCoordBuffer=e.device.createBuffer({size:i.length*Float32Array.BYTES_PER_ELEMENT,usage:GPUBufferUsage.VERTEX,mappedAtCreation:!0}),new Float32Array(this.texCoordBuffer.getMappedRange()).set(i),this.texCoordBuffer.unmap(),this.indicesBuffer=e.device.createBuffer({size:n.length*Float32Array.BYTES_PER_ELEMENT,usage:GPUBufferUsage.INDEX,mappedAtCreation:!0}),new Uint16Array(this.indicesBuffer.getMappedRange()).set(n),this.indicesBuffer.unmap()}get vertexCount(){return this._vertexCount}getVertexState(e){return{module:e,entryPoint:"vertex_main",buffers:[{arrayStride:3*Float32Array.BYTES_PER_ELEMENT,stepMode:"vertex",attributes:[{format:"float32x3",offset:0,shaderLocation:0}]},{arrayStride:3*Float32Array.BYTES_PER_ELEMENT,stepMode:"vertex",attributes:[{format:"float32x3",offset:0,shaderLocation:1}]},{arrayStride:2*Float32Array.BYTES_PER_ELEMENT,stepMode:"vertex",attributes:[{format:"float32x2",offset:0,shaderLocation:2}]}]}}setVertexBuffers(e){e.setIndexBuffer(this.indicesBuffer,"uint16"),e.setVertexBuffer(0,this.positionBuffer),e.setVertexBuffer(1,this.normalBuffer),e.setVertexBuffer(2,this.texCoordBuffer)}}class z extends Float32Array{static calculatePadding(e,n){const r=4-e%4;if(r===4)return 0;if(n==null)return r;if(Array.isArray(n))switch(r){case 1:return 1;case 2:{if(n.length>2)return 2;break}case 3:return n.length===2?1:3}return 0}static inferMemberType(e){const n=[];if(e.isArray)e.length<=4&&n.push(`vec${e.length}<f32>`),e.length==4&&n.push("mat2x2<f32>"),e.length==6&&(n.push("mat2x3<f32>"),n.push("mat3x2<f32>")),e.length==8&&(n.push("mat2x4<f32>"),n.push("mat4x2<f32>")),e.length==9&&n.push("mat3x3<f32>"),e.length==12&&(n.push("mat3x4<f32>"),n.push("mat4x3<f32>")),e.length==16&&n.push("mat4x4<f32>"),n.push("array<T, N>");else return"f32";return`[${n.join(" OR ")}]`}constructor(e,n=1){const r=[],s={};let i=0,o=e,c;typeof o!="function"&&(c=[...Object.entries(o)]);for(let h=0;h<n;h++){typeof o=="function"&&(c=[...Object.entries(o(h))]);for(let u=0;u<c.length;u++){const a=c[u],m=a[0];let f=a[1],p=r.length;f=f instanceof Function?f():f,f=f instanceof Float32Array?Array.from(f):f,h===0&&(s[m]={index:p,length:Array.isArray(f)?f.length:1,isArray:Array.isArray(f)}),Array.isArray(f)?r.push(...f):r.push(f);let d=c[u+1]?c[u+1][1]:c[0][1];d&&(d=d instanceof Function?d():d,d=d instanceof Float32Array?Array.from(d):d);const l=z.calculatePadding(r.length,d);for(let g=0;g<l;g++)r.push(0)}h===0&&(i=r.length)}super(r),this.count=n,this.metadata={},this._stride=0,this.metadata=s,this._stride=i}get stride(){return this._stride}getValueAt(e,n=0){const{index:r,length:s}=this.metadata[e];return s>1?Array.from(new Float32Array(this.buffer).slice(r+n*this.stride,r+n*this.stride+s)):this[r+n*this.stride]}setValueAt(e,n,r=0,s=0){const{index:i}=this.metadata[e];n instanceof Float32Array&&(n=Array.from(n)),Array.isArray(n)?this.set(n,i+s+r*this.stride):this.set([n],i+s+r*this.stride)}getWgslChunk(e="MyStruct"){const n=Object.entries(this.metadata);return`
    struct ${e} {
        ${n.reduce((r,[s,i])=>r===""?`${s} : ${z.inferMemberType(i)},`:`${r}
        ${s} : ${z.inferMemberType(i)},`,"")}
    }`}}class bn{constructor(e,n){this.device=e,this.bufferMembers=[],this.textures=[],this.bufferNeedsUpdate=!0,this.autoUpdate=!0;for(let s in n){const i=n[s];i instanceof GPUTexture?this.textures.push({key:s,value:i}):this.bufferMembers.push({key:s,value:i})}this.createArraysAndBuffers(),this.createBindGroup();const r={get:(s,i)=>this.proxyGetHandler(s,i),set:(s,i,o)=>this.proxySetHandler(s,i,o)};this._member=new Proxy({},r)}createArraysAndBuffers(){const e=this.bufferMembers.reduce((n,r)=>(n[r.key]=r.value,n),{});this._uniformsArray=new z(e),this.uniformsBuffer=this.device.createBuffer({size:this._uniformsArray.byteLength,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),this.update()}createBindGroup(){const e=[];this.bufferMembers.length&&e.push({binding:e.length,visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT|GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}),this.textures.forEach(({value:r})=>{e.push({binding:e.length,visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT|GPUShaderStage.COMPUTE,sampler:{type:"filtering"}}),e.push({binding:e.length,visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT|GPUShaderStage.COMPUTE,texture:{sampleType:"float",multisampled:!1,viewDimension:r.dimension}})}),this._bindGroupLayout=this.device.createBindGroupLayout({entries:e});const n=[];this.bufferMembers.length&&n.push({binding:0,resource:{buffer:this.uniformsBuffer}}),this.textures.forEach(({value:r})=>{n.push({binding:n.length,resource:this.device.createSampler({magFilter:"linear",minFilter:"linear"})}),n.push({binding:n.length,resource:r.createView({dimension:r.dimension})})}),this._bindGroup=this.device.createBindGroup({layout:this.bindGroupLayout,entries:n})}proxyGetHandler(e,n){const r=this.textures.find(({key:s})=>s===n);return r?r.value:this._uniformsArray.getValueAt(n)}proxySetHandler(e,n,r){if(r instanceof GPUTexture){const s=this.textures.find(({key:i})=>i===n);s.value=r,this.createBindGroup()}else this._uniformsArray.setValueAt(n,r),this.bufferNeedsUpdate=!0;return this.autoUpdate&&this.update(),!0}get uniformsArray(){return this._uniformsArray}get member(){return this._member}get bindGroupLayout(){return this._bindGroupLayout}get bindGroup(){return this._bindGroup}getWgslChunk(e="[REPLACE_WITH_GROUP_INDEX]",n=""){const r=`Uniforms${n.charAt(0).toUpperCase()+n.slice(1)}`;return`
    ${this._uniformsArray.getWgslChunk(r)}

    @group(${e}) @binding(0) var<uniform> uniforms${n?"_":""}${n} : ${r};

    ${this.textures.map((s,i)=>`
      @group(${e}) @binding(${i*2+1}) var sampler_2d_${i}: sampler;
      @group(${e}) @binding(${i*2+2}) var texture_${i}: texture_2d<f32>;
    `).join(`
`)}
    `}update(){this.bufferNeedsUpdate&&(this.device.queue.writeBuffer(this.uniformsBuffer,0,this._uniformsArray),this.bufferNeedsUpdate=!1)}}globalThis&&globalThis.__awaiter;var Xe=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function c(a){try{u(r.next(a))}catch(m){o(m)}}function h(a){try{u(r.throw(a))}catch(m){o(m)}}function u(a){a.done?i(a.value):s(a.value).then(c,h)}u((r=r.apply(t,e||[])).next())})};class Cn{constructor(e,n){this.device=e,this.data=n,this.bindGroupSwapIndex=0,this.isReadingStagingBuffer=!1;const r=n.byteLength;this.bufferA=this.device.createBuffer({size:r,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST|GPUBufferUsage.COPY_SRC,mappedAtCreation:!0}),new Float32Array(this.bufferA.getMappedRange()).set([...n]),this.bufferA.unmap(),this.bufferB=this.device.createBuffer({size:r,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST|GPUBufferUsage.COPY_SRC,mappedAtCreation:!0}),new Float32Array(this.bufferB.getMappedRange()).set([...n]),this.bufferB.unmap(),this.stagingBuffer=this.device.createBuffer({size:r,usage:GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST}),this._bindGroupLayout=this.device.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.COMPUTE|GPUShaderStage.FRAGMENT|GPUShaderStage.VERTEX,buffer:{type:"read-only-storage"}},{binding:1,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}}]}),this.bindGroupA=this.device.createBindGroup({layout:this.bindGroupLayout,entries:[{binding:0,resource:{buffer:this.bufferA}},{binding:1,resource:{buffer:this.bufferB}}]}),this.bindGroupB=this.device.createBindGroup({layout:this.bindGroupLayout,entries:[{binding:0,resource:{buffer:this.bufferB}},{binding:1,resource:{buffer:this.bufferA}}]})}get length(){return this.data.length}get byteLength(){return this.data.byteLength}get bindGroupLayout(){return this._bindGroupLayout}get bindGroup(){return this.bindGroupSwapIndex%2===0?this.bindGroupA:this.bindGroupB}get buffer(){return this.bindGroupSwapIndex%2===0?this.bufferA:this.bufferB}get backBuffer(){return this.bindGroupSwapIndex%2===1?this.bufferA:this.bufferB}step(){this.bindGroupSwapIndex++}getWgslChunk(e="[REPLACE_WITH_GROUP_INDEX]",n=""){if(this.data instanceof z){const r=`PingPong${n.charAt(0).toUpperCase()+n.slice(1)}`;return`
      ${this.data.getWgslChunk(r)}
  
    @group(${e}) @binding(0) var<storage, read> input${n?"_":""}${n} : array<${r}>;
    @group(${e}) @binding(1) var<storage, read_write> output${n?"_":""}${n} : array<${r}>;
      `}else return`
    @group(${e}) @binding(0) var<storage, read> input${n?"_":""}${n} : array<[REPLACE_WITH_TYPE]>;
    @group(${e}) @binding(1) var<storage, read_write> output${n?"_":""}${n} : array<[REPLACE_WITH_TYPE]>;
      `}read(){return Xe(this,void 0,void 0,function*(){if(this.isReadingStagingBuffer)return null;this.isReadingStagingBuffer=!0;const e=this.device.createCommandEncoder();e.copyBufferToBuffer(this.buffer,0,this.stagingBuffer,0,this.stagingBuffer.size),this.device.queue.submit([e.finish()]),yield this.stagingBuffer.mapAsync(GPUMapMode.READ,0,this.stagingBuffer.size);const r=this.stagingBuffer.getMappedRange(0,this.stagingBuffer.size).slice(0);return this.stagingBuffer.unmap(),this.isReadingStagingBuffer=!1,new Float32Array(r)})}}class wn{constructor(){this.then=Date.now(),this.delta=16.666,this.correction=1,this.elapsedTime=0,this.reset=this.reset.bind(this),window.addEventListener("blur",this.reset),window.addEventListener("focus",this.reset)}reset(){this.then=Date.now(),this.elapsedTime=0,this.correction=1,this.delta=16.66}tick(){const e=Date.now();return typeof this.then=="number"&&(this.delta=Math.min(e-this.then,16.666*5)),this.elapsedTime+=this.delta,this.then=e,this.correction=this.delta/16.666,{delta:this.delta,correction:this.correction,elapsedTime:this.elapsedTime}}}var Pe=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function qe(){var t=new Pe(2);return Pe!=Float32Array&&(t[0]=0,t[1]=0),t}function Un(t,e,n){return t[0]=e,t[1]=n,t}function Pn(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}(function(){var t=qe();return function(e,n,r,s,i,o){var c,h;for(n||(n=2),r||(r=0),s?h=Math.min(s*n+r,e.length):h=e.length,c=r;c<h;c+=n)t[0]=e[c],t[1]=e[c+1],i(t,t,o),e[c]=t[0],e[c+1]=t[1];return e}})();globalThis&&globalThis.__awaiter;var Ke=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function c(a){try{u(r.next(a))}catch(m){o(m)}}function h(a){try{u(r.throw(a))}catch(m){o(m)}}function u(a){a.done?i(a.value):s(a.value).then(c,h)}u((r=r.apply(t,e||[])).next())})};const Qe=()=>Ke(void 0,void 0,void 0,function*(){if(!navigator.gpu){const e="WebGPU not available! — Use Chrome Canary and enable-unsafe-gpu in flags.";return console.error(e),alert(e),!1}const t=yield navigator.gpu.requestAdapter();return t?yield t.requestDevice():(console.warn("Could not access Adapter"),!1)}),Sn={requestWebGPU:Qe};/* @license twgl.js 5.3.0 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
Available via the MIT license.
see: http://github.com/greggman/twgl.js for details */let ne=Float32Array;function re(t,e,n){const r=new ne(3);return t&&(r[0]=t),e&&(r[1]=e),n&&(r[2]=n),r}function Ze(t,e,n){return n=n||new ne(3),n[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n}function Je(t,e,n){return n=n||new ne(3),n[0]=t[0]*e[0],n[1]=t[1]*e[1],n[2]=t[2]*e[2],n}let Ne=Float32Array;function et(t){return t=t||new Ne(16),t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function tt(t,e){e=e||new Ne(16);const n=t[0*4+0],r=t[0*4+1],s=t[0*4+2],i=t[0*4+3],o=t[1*4+0],c=t[1*4+1],h=t[1*4+2],u=t[1*4+3],a=t[2*4+0],m=t[2*4+1],f=t[2*4+2],p=t[2*4+3],d=t[3*4+0],l=t[3*4+1],g=t[3*4+2],T=t[3*4+3],E=f*T,B=g*p,_=h*T,y=g*u,x=h*p,w=f*u,b=s*T,C=g*i,P=s*p,S=f*i,R=s*u,G=h*i,V=a*l,$=d*m,v=o*l,L=d*c,D=o*m,O=a*c,j=n*l,H=d*r,W=n*m,X=a*r,q=n*c,K=o*r,be=E*c+y*m+x*l-(B*c+_*m+w*l),Ce=B*r+b*m+S*l-(E*r+C*m+P*l),we=_*r+C*c+R*l-(y*r+b*c+G*l),Ue=w*r+P*c+G*m-(x*r+S*c+R*m),U=1/(n*be+o*Ce+a*we+d*Ue);return e[0]=U*be,e[1]=U*Ce,e[2]=U*we,e[3]=U*Ue,e[4]=U*(B*o+_*a+w*d-(E*o+y*a+x*d)),e[5]=U*(E*n+C*a+P*d-(B*n+b*a+S*d)),e[6]=U*(y*n+b*o+G*d-(_*n+C*o+R*d)),e[7]=U*(x*n+S*o+R*a-(w*n+P*o+G*a)),e[8]=U*(V*u+L*p+D*T-($*u+v*p+O*T)),e[9]=U*($*i+j*p+X*T-(V*i+H*p+W*T)),e[10]=U*(v*i+H*u+q*T-(L*i+j*u+K*T)),e[11]=U*(O*i+W*u+K*p-(D*i+X*u+q*p)),e[12]=U*(v*f+O*g+$*h-(D*g+V*h+L*f)),e[13]=U*(W*g+V*s+H*f-(j*f+X*g+$*s)),e[14]=U*(j*h+K*g+L*s-(q*g+v*s+H*h)),e[15]=U*(q*f+D*s+X*h-(W*h+K*f+O*s)),e}function nt(t,e,n){n=n||re();const r=e[0],s=e[1],i=e[2],o=r*t[0*4+3]+s*t[1*4+3]+i*t[2*4+3]+t[3*4+3];return n[0]=(r*t[0*4+0]+s*t[1*4+0]+i*t[2*4+0]+t[3*4+0])/o,n[1]=(r*t[0*4+1]+s*t[1*4+1]+i*t[2*4+1]+t[3*4+1])/o,n[2]=(r*t[0*4+2]+s*t[1*4+2]+i*t[2*4+2]+t[3*4+2])/o,n}function rt(t,e,n){n=n||re();const r=e[0],s=e[1],i=e[2];return n[0]=r*t[0*4+0]+s*t[1*4+0]+i*t[2*4+0],n[1]=r*t[0*4+1]+s*t[1*4+1]+i*t[2*4+1],n[2]=r*t[0*4+2]+s*t[1*4+2]+i*t[2*4+2],n}const se=5120,Y=5121,ie=5122,oe=5123,ce=5124,ue=5125,ae=5126,st=32819,it=32820,ot=33635,ct=5131,ut=33640,at=35899,ft=35902,ht=36269,lt=34042,Re={};{const t=Re;t[se]=Int8Array,t[Y]=Uint8Array,t[ie]=Int16Array,t[oe]=Uint16Array,t[ce]=Int32Array,t[ue]=Uint32Array,t[ae]=Float32Array,t[st]=Uint16Array,t[it]=Uint16Array,t[ot]=Uint16Array,t[ct]=Uint16Array,t[ut]=Uint32Array,t[at]=Uint32Array,t[ft]=Uint32Array,t[ht]=Uint32Array,t[lt]=Uint32Array}function fe(t){if(t instanceof Int8Array)return se;if(t instanceof Uint8Array||t instanceof Uint8ClampedArray)return Y;if(t instanceof Int16Array)return ie;if(t instanceof Uint16Array)return oe;if(t instanceof Int32Array)return ce;if(t instanceof Uint32Array)return ue;if(t instanceof Float32Array)return ae;throw new Error("unsupported typed array type")}function Me(t){if(t===Int8Array)return se;if(t===Uint8Array||t===Uint8ClampedArray)return Y;if(t===Int16Array)return ie;if(t===Uint16Array)return oe;if(t===Int32Array)return ce;if(t===Uint32Array)return ue;if(t===Float32Array)return ae;throw new Error("unsupported typed array type")}function pt(t){const e=Re[t];if(!e)throw new Error("unknown gl type");return e}const Q=typeof SharedArrayBuffer<"u"?function(e){return e&&e.buffer&&(e.buffer instanceof ArrayBuffer||e.buffer instanceof SharedArrayBuffer)}:function(e){return e&&e.buffer&&e.buffer instanceof ArrayBuffer};function dt(t,e,n){t.forEach(function(r){const s=e[r];s!==void 0&&(n[r]=s)})}const Se=new Map;function mt(t,e){if(!t||typeof t!="object")return!1;let n=Se.get(e);n||(n=new WeakMap,Se.set(e,n));let r=n.get(t);if(r===void 0){const s=Object.prototype.toString.call(t);r=s.substring(8,s.length-1)===e,n.set(t,r)}return r}function gt(t,e){return typeof WebGLBuffer<"u"&&mt(e,"WebGLBuffer")}const Ve=35044,M=34962,Ie=34963,yt=34660,At=5120,Tt=5121,Et=5122,xt=5123,Bt=5124,_t=5125,$e=5126,ve={attribPrefix:""};function bt(t,e,n,r,s){t.bindBuffer(e,n),t.bufferData(e,r,s||Ve)}function he(t,e,n,r){if(gt(t,e))return e;n=n||M;const s=t.createBuffer();return bt(t,n,s,e,r),s}function Le(t){return t==="indices"}function Ct(t){return t===Int8Array||t===Uint8Array}function le(t){return t.length?t:t.data}const wt=/coord|texture/i,Ut=/color|colour/i;function Pt(t,e){let n;if(wt.test(t)?n=2:Ut.test(t)?n=4:n=3,e%n>0)throw new Error(`Can not guess numComponents for attribute '${t}'. Tried ${n} but ${e} values is not evenly divisible by ${n}. You should specify it.`);return n}function pe(t,e,n){return t.numComponents||t.size||Pt(e,n||le(t).length)}function Z(t,e){if(Q(t))return t;if(Q(t.data))return t.data;Array.isArray(t)&&(t={data:t});let n=t.type?de(t.type):void 0;return n||(Le(e)?n=Uint16Array:n=Float32Array),new n(t.data)}function St(t){return typeof t=="number"?t:t?Me(t):$e}function de(t){return typeof t=="number"?pt(t):t||Float32Array}function Gt(t,e){return{buffer:e.buffer,numValues:2*3*4,type:St(e.type),arrayType:de(e.type)}}function Ft(t,e){const n=e.data||e,r=de(e.type),s=n*r.BYTES_PER_ELEMENT,i=t.createBuffer();return t.bindBuffer(M,i),t.bufferData(M,s,e.drawType||Ve),{buffer:i,numValues:n,type:Me(r),arrayType:r}}function Nt(t,e,n){const r=Z(e,n);return{arrayType:r.constructor,buffer:he(t,r,void 0,e.drawType),type:fe(r),numValues:0}}function Rt(t,e){const n={};return Object.keys(e).forEach(function(r){if(!Le(r)){const s=e[r],i=s.attrib||s.name||s.attribName||ve.attribPrefix+r;if(s.value){if(!Array.isArray(s.value)&&!Q(s.value))throw new Error("array.value is not array or typedarray");n[i]={value:s.value}}else{let o;s.buffer&&s.buffer instanceof WebGLBuffer?o=Gt:typeof s=="number"||typeof s.data=="number"?o=Ft:o=Nt;const{buffer:c,type:h,numValues:u,arrayType:a}=o(t,s,r),m=s.normalize!==void 0?s.normalize:Ct(a),f=pe(s,r,u);n[i]={buffer:c,numComponents:f,type:h,normalize:m,stride:s.stride||0,offset:s.offset||0,divisor:s.divisor===void 0?void 0:s.divisor,drawType:s.drawType}}}}),t.bindBuffer(M,null),n}function Mt(t,e){return e===At||e===Tt?1:e===Et||e===xt?2:e===Bt||e===_t||e===$e?4:0}const k=["position","positions","a_position"];function Vt(t){let e,n;for(n=0;n<k.length&&(e=k[n],!(e in t));++n);n===k.length&&(e=Object.keys(t)[0]);const r=t[e],s=le(r).length;if(s===void 0)return 1;const i=pe(r,e),o=s/i;if(s%i>0)throw new Error(`numComponents ${i} not correct for length ${s}`);return o}function It(t,e){let n,r;for(r=0;r<k.length&&(n=k[r],!(n in e||(n=ve.attribPrefix+n,n in e)));++r);r===k.length&&(n=Object.keys(e)[0]);const s=e[n];if(!s.buffer)return 1;t.bindBuffer(M,s.buffer);const i=t.getBufferParameter(M,yt);t.bindBuffer(M,null);const o=Mt(t,s.type),c=i/o,h=s.numComponents||s.size,u=c/h;if(u%1!==0)throw new Error(`numComponents ${h} not correct for length ${length}`);return u}function $t(t,e,n){const r=Rt(t,e),s=Object.assign({},n||{});s.attribs=Object.assign({},n?n.attribs:{},r);const i=e.indices;if(i){const o=Z(i,"indices");s.indices=he(t,o,Ie),s.numElements=o.length,s.elementType=fe(o)}else s.numElements||(s.numElements=It(t,s.attribs));return s}function vt(t,e,n){const r=n==="indices"?Ie:M,s=Z(e,n);return he(t,s,r)}function Lt(t,e){const n={};return Object.keys(e).forEach(function(r){n[r]=vt(t,e[r],r)}),e.indices?(n.numElements=e.indices.length,n.elementType=fe(Z(e.indices))):n.numElements=Vt(e),n}const I=le,Dt=pe;function De(t,e){let n=0;return t.push=function(){for(let r=0;r<arguments.length;++r){const s=arguments[r];if(s instanceof Array||Q(s))for(let i=0;i<s.length;++i)t[n++]=s[i];else t[n++]=s}},t.reset=function(r){n=r||0},t.numComponents=e,Object.defineProperty(t,"numElements",{get:function(){return this.length/this.numComponents|0}}),t}function A(t,e,n){const r=n||Float32Array;return De(new r(t*e),t)}function Ot(t){return t!=="indices"}function zt(t){const e=t.indices,n={},r=e.length;function s(i){const o=t[i],c=o.numComponents,h=A(c,r,o.constructor);for(let u=0;u<r;++u){const m=e[u]*c;for(let f=0;f<c;++f)h.push(o[m+f])}n[i]=h}return Object.keys(t).filter(Ot).forEach(s),n}function kt(t){if(t.indices)throw new Error("can not flatten normals of indexed vertices. deindex them first");const e=t.normal,n=e.length;for(let r=0;r<n;r+=9){const s=e[r+0],i=e[r+1],o=e[r+2],c=e[r+3],h=e[r+4],u=e[r+5],a=e[r+6],m=e[r+7],f=e[r+8];let p=s+c+a,d=i+h+m,l=o+u+f;const g=Math.sqrt(p*p+d*d+l*l);p/=g,d/=g,l/=g,e[r+0]=p,e[r+1]=d,e[r+2]=l,e[r+3]=p,e[r+4]=d,e[r+5]=l,e[r+6]=p,e[r+7]=d,e[r+8]=l}return t}function me(t,e,n){const r=t.length,s=new Float32Array(3);for(let i=0;i<r;i+=3)n(e,[t[i],t[i+1],t[i+2]],s),t[i]=s[0],t[i+1]=s[1],t[i+2]=s[2]}function Yt(t,e,n){n=n||re();const r=e[0],s=e[1],i=e[2];return n[0]=r*t[0*4+0]+s*t[0*4+1]+i*t[0*4+2],n[1]=r*t[1*4+0]+s*t[1*4+1]+i*t[1*4+2],n[2]=r*t[2*4+0]+s*t[2*4+1]+i*t[2*4+2],n}function Oe(t,e){return me(t,e,rt),t}function ze(t,e){return me(t,tt(e),Yt),t}function ke(t,e){return me(t,e,nt),t}function Ye(t,e){return Object.keys(t).forEach(function(n){const r=t[n];n.indexOf("pos")>=0?ke(r,e):n.indexOf("tan")>=0||n.indexOf("binorm")>=0?Oe(r,e):n.indexOf("norm")>=0&&ze(r,e)}),t}function ge(t,e,n){return t=t||2,e=e||0,n=n||0,t*=.5,{position:{numComponents:2,data:[e+-1*t,n+-1*t,e+1*t,n+-1*t,e+-1*t,n+1*t,e+1*t,n+1*t]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function ye(t,e,n,r,s){t=t||1,e=e||1,n=n||1,r=r||1,s=s||et();const i=(n+1)*(r+1),o=A(3,i),c=A(3,i),h=A(2,i);for(let f=0;f<=r;f++)for(let p=0;p<=n;p++){const d=p/n,l=f/r;o.push(t*d-t*.5,0,e*l-e*.5),c.push(0,1,0),h.push(d,l)}const u=n+1,a=A(3,n*r*2,Uint16Array);for(let f=0;f<r;f++)for(let p=0;p<n;p++)a.push((f+0)*u+p,(f+1)*u+p,(f+0)*u+p+1),a.push((f+1)*u+p,(f+1)*u+p+1,(f+0)*u+p+1);return Ye({position:o,normal:c,texcoord:h,indices:a},s)}function Ae(t,e,n,r,s,i,o){if(e<=0||n<=0)throw new Error("subdivisionAxis and subdivisionHeight must be > 0");r=r||0,s=s||Math.PI,i=i||0,o=o||Math.PI*2;const c=s-r,h=o-i,u=(e+1)*(n+1),a=A(3,u),m=A(3,u),f=A(2,u);for(let l=0;l<=n;l++)for(let g=0;g<=e;g++){const T=g/e,E=l/n,B=h*T+i,_=c*E+r,y=Math.sin(B),x=Math.cos(B),w=Math.sin(_),b=Math.cos(_),C=x*w,P=b,S=y*w;a.push(t*C,t*P,t*S),m.push(C,P,S),f.push(1-T,E)}const p=e+1,d=A(3,e*n*2,Uint16Array);for(let l=0;l<e;l++)for(let g=0;g<n;g++)d.push((g+0)*p+l,(g+0)*p+l+1,(g+1)*p+l),d.push((g+1)*p+l,(g+0)*p+l+1,(g+1)*p+l+1);return{position:a,normal:m,texcoord:f,indices:d}}const jt=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function Te(t){t=t||1;const e=t/2,n=[[-e,-e,-e],[+e,-e,-e],[-e,+e,-e],[+e,+e,-e],[-e,-e,+e],[+e,-e,+e],[-e,+e,+e],[+e,+e,+e]],r=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],s=[[1,0],[0,0],[0,1],[1,1]],i=6*4,o=A(3,i),c=A(3,i),h=A(2,i),u=A(3,6*2,Uint16Array);for(let a=0;a<6;++a){const m=jt[a];for(let p=0;p<4;++p){const d=n[m[p]],l=r[a],g=s[p];o.push(d),c.push(l),h.push(g)}const f=4*a;u.push(f+0,f+1,f+2),u.push(f+0,f+2,f+3)}return{position:o,normal:c,texcoord:h,indices:u}}function J(t,e,n,r,s,i,o){if(r<3)throw new Error("radialSubdivisions must be 3 or greater");if(s<1)throw new Error("verticalSubdivisions must be 1 or greater");const c=i===void 0?!0:i,h=o===void 0?!0:o,u=(c?2:0)+(h?2:0),a=(r+1)*(s+1+u),m=A(3,a),f=A(3,a),p=A(2,a),d=A(3,r*(s+u/2)*2,Uint16Array),l=r+1,g=Math.atan2(t-e,n),T=Math.cos(g),E=Math.sin(g),B=c?-2:0,_=s+(h?2:0);for(let y=B;y<=_;++y){let x=y/s,w=n*x,b;y<0?(w=0,x=1,b=t):y>s?(w=n,x=1,b=e):b=t+(e-t)*(y/s),(y===-2||y===s+2)&&(b=0,x=0),w-=n/2;for(let C=0;C<l;++C){const P=Math.sin(C*Math.PI*2/r),S=Math.cos(C*Math.PI*2/r);m.push(P*b,w,S*b),y<0?f.push(0,-1,0):y>s?f.push(0,1,0):b===0?f.push(0,0,0):f.push(P*T,E,S*T),p.push(C/r,1-x)}}for(let y=0;y<s+u;++y)if(!(y===1&&c||y===s+u-2&&h))for(let x=0;x<r;++x)d.push(l*(y+0)+0+x,l*(y+0)+1+x,l*(y+1)+1+x),d.push(l*(y+0)+0+x,l*(y+1)+1+x,l*(y+1)+0+x);return{position:m,normal:f,texcoord:p,indices:d}}function Ge(t,e){e=e||[];const n=[];for(let r=0;r<t.length;r+=4){const s=t[r],i=t.slice(r+1,r+4);i.push.apply(i,e);for(let o=0;o<s;++o)n.push.apply(n,i)}return n}function Ee(){const t=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],e=[.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0],n=Ge([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),r=Ge([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),s=t.length/3,i={position:A(3,s),texcoord:A(2,s),normal:A(3,s),color:A(4,s,Uint8Array),indices:A(3,s/3,Uint16Array)};i.position.push(t),i.texcoord.push(e),i.normal.push(n),i.color.push(r);for(let o=0;o<s;++o)i.indices.push(o);return i}function ee(t,e,n,r,s,i,o){if(s<=0)throw new Error("subdivisionDown must be > 0");i=i||0,o=o||1;const c=2,h=o-i,u=(s+1)*2*(2+c),a=A(3,u),m=A(3,u),f=A(2,u);function p(E,B,_){return E+(B-E)*_}function d(E,B,_,y,x,w){for(let b=0;b<=s;b++){const C=B/(c-1),P=b/s,S=(C-.5)*2,R=(i+P*h)*Math.PI,G=Math.sin(R),V=Math.cos(R),$=p(t,E,G),v=S*r,L=V*t,D=G*$;a.push(v,L,D);const O=Ze(Je([0,G,V],_),y);m.push(O),f.push(C*x+w,P)}}for(let E=0;E<c;E++){const B=(E/(c-1)-.5)*2;d(e,E,[1,1,1],[0,0,0],1,0),d(e,E,[0,0,0],[B,0,0],0,0),d(n,E,[1,1,1],[0,0,0],1,0),d(n,E,[0,0,0],[B,0,0],0,1)}const l=A(3,s*2*(2+c),Uint16Array);function g(E,B){for(let _=0;_<s;++_)l.push(E+_+0,E+_+1,B+_+0),l.push(E+_+1,B+_+1,B+_+0)}const T=s+1;return g(T*0,T*4),g(T*5,T*7),g(T*6,T*2),g(T*3,T*1),{position:a,normal:m,texcoord:f,indices:l}}function xe(t,e,n,r,s,i){return J(t,t,e,n,r,s,i)}function Be(t,e,n,r,s,i){if(n<3)throw new Error("radialSubdivisions must be 3 or greater");if(r<3)throw new Error("verticalSubdivisions must be 3 or greater");s=s||0,i=i||Math.PI*2;const o=i-s,c=n+1,h=r+1,u=c*h,a=A(3,u),m=A(3,u),f=A(2,u),p=A(3,n*r*2,Uint16Array);for(let d=0;d<h;++d){const l=d/r,g=l*Math.PI*2,T=Math.sin(g),E=t+T*e,B=Math.cos(g),_=B*e;for(let y=0;y<c;++y){const x=y/n,w=s+x*o,b=Math.sin(w),C=Math.cos(w),P=b*E,S=C*E,R=b*T,G=C*T;a.push(P,_,S),m.push(R,B,G),f.push(x,1-l)}}for(let d=0;d<r;++d)for(let l=0;l<n;++l){const g=1+l,T=1+d;p.push(c*d+l,c*T+l,c*d+g),p.push(c*T+l,c*T+g,c*d+g)}return{position:a,normal:m,texcoord:f,indices:p}}function _e(t,e,n,r,s){if(e<3)throw new Error("divisions must be at least 3");n=n||1,s=s||1,r=r||0;const i=(e+1)*(n+1),o=A(3,i),c=A(3,i),h=A(2,i),u=A(3,n*e*2,Uint16Array);let a=0;const m=t-r,f=e+1;for(let p=0;p<=n;++p){const d=r+m*Math.pow(p/n,s);for(let l=0;l<=e;++l){const g=2*Math.PI*l/e,T=d*Math.cos(g),E=d*Math.sin(g);if(o.push(T,0,E),c.push(0,1,0),h.push(1-l/e,p/n),p>0&&l!==e){const B=a+(l+1),_=a+l,y=a+l-f,x=a+(l+1)-f;u.push(B,_,y),u.push(B,y,x)}}a+=e+1}return{position:o,normal:c,texcoord:h,indices:u}}function Ht(t){return Math.random()*t|0}function Wt(t,e){e=e||{};const n=t.position.numElements,r=A(4,n,Uint8Array),s=e.rand||function(i,o){return o<3?Ht(256):255};if(t.color=r,t.indices)for(let i=0;i<n;++i)r.push(s(i,0),s(i,1),s(i,2),s(i,3));else{const i=e.vertsPerColor||3,o=n/i;for(let c=0;c<o;++c){const h=[s(c,0),s(c,1),s(c,2),s(c,3)];for(let u=0;u<i;++u)r.push(h)}}return t}function F(t){return function(e){const n=t.apply(this,Array.prototype.slice.call(arguments,1));return Lt(e,n)}}function N(t){return function(e){const n=t.apply(null,Array.prototype.slice.call(arguments,1));return $t(e,n)}}const Xt=["numComponents","size","type","normalize","stride","offset","attrib","name","attribName"];function te(t,e,n,r){r=r||0;const s=t.length;for(let i=0;i<s;++i)e[n+i]=t[i]+r}function je(t,e){const n=I(t),r=new n.constructor(e);let s=r;return n.numComponents&&n.numElements&&De(r,n.numComponents),t.data&&(s={data:r},dt(Xt,t,s)),s}function qt(t){const e={};let n;for(let c=0;c<t.length;++c){const h=t[c];Object.keys(h).forEach(function(u){e[u]||(e[u]=[]),!n&&u!=="indices"&&(n=u);const a=h[u],m=Dt(a,u),p=I(a).length/m;e[u].push(p)})}function r(c){let h=0,u;for(let a=0;a<t.length;++a){const f=t[a][c],p=I(f);h+=p.length,(!u||f.data)&&(u=f)}return{length:h,spec:u}}function s(c,h,u){let a=0,m=0;for(let f=0;f<t.length;++f){const d=t[f][c],l=I(d);c==="indices"?(te(l,u,m,a),a+=h[f]):te(l,u,m),m+=l.length}}const i=e[n],o={};return Object.keys(e).forEach(function(c){const h=r(c),u=je(h.spec,h.length);s(c,i,I(u)),o[c]=u}),o}function Kt(t){const e={};return Object.keys(t).forEach(function(n){const r=t[n],s=I(r),i=je(r,s.length);te(s,I(i),0),e[n]=i}),e}const Qt=N(Ee),Zt=F(Ee),Jt=N(Te),en=F(Te),tn=N(ye),nn=F(ye),rn=N(Ae),sn=F(Ae),on=N(J),cn=F(J),un=N(ge),an=F(ge),He=N(ee),We=F(ee),fn=N(xe),hn=F(xe),ln=N(Be),pn=F(Be),dn=N(_e),mn=F(_e),gn=He,yn=We,An=ee;var Gn=Object.freeze({__proto__:null,create3DFBufferInfo:Qt,create3DFBuffers:Zt,create3DFVertices:Ee,createAugmentedTypedArray:A,createCubeBufferInfo:Jt,createCubeBuffers:en,createCubeVertices:Te,createPlaneBufferInfo:tn,createPlaneBuffers:nn,createPlaneVertices:ye,createSphereBufferInfo:rn,createSphereBuffers:sn,createSphereVertices:Ae,createTruncatedConeBufferInfo:on,createTruncatedConeBuffers:cn,createTruncatedConeVertices:J,createXYQuadBufferInfo:un,createXYQuadBuffers:an,createXYQuadVertices:ge,createCresentBufferInfo:gn,createCresentBuffers:yn,createCresentVertices:An,createCrescentBufferInfo:He,createCrescentBuffers:We,createCrescentVertices:ee,createCylinderBufferInfo:fn,createCylinderBuffers:hn,createCylinderVertices:xe,createTorusBufferInfo:ln,createTorusBuffers:pn,createTorusVertices:Be,createDiscBufferInfo:dn,createDiscBuffers:mn,createDiscVertices:_e,deindexVertices:zt,flattenNormals:kt,makeRandomVertexColors:Wt,reorientDirections:Oe,reorientNormals:ze,reorientPositions:ke,reorientVertices:Ye,concatVertices:qt,duplicateVertices:Kt});export{wn as C,_n as G,Sn as H,Cn as P,Tn as R,z as S,bn as U,Bn as a,xn as b,qe as c,Pn as d,En as e,Gn as p,Un as s};
